(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"/tWa":function(e,t,n){"use strict";var r=n("KI45");n("hfKm")(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("/HRN")),u=r(n("WaGi")),o=n("T89o"),c=r(n("Bk/R")),i=/https?:\/\//,l=/\/$/,s=/\/([a-z]{2}[-|_][a-zA-Z]{2}\/?)$/,f=/\/([a-z]{2}[-|_][a-zA-Z]{2})\/([\w\d_\-.]+)(\/.*)?/,d=/(www\.ferrari\.com|localhost:[0-9]+)\/([\w\d_-]+)(\/.*)?/,p=function(){function e(){(0,a.default)(this,e)}return(0,u.default)(e,null,[{key:"stripProtocol",value:function(e){return e.replace(i,"").replace(l,"")}},{key:"stripLocale",value:function(t){var n=e.stripProtocol(t);return f.test(n)?n.replace(f,"/$2$3").replace(l,""):s.test(n)?n.replace(s,"/").replace(l,""):n}},{key:"getApplication",value:function(t){var n=e.stripLocale(t);return d.test(n)?n.replace(d,"$1/$2").replace(l,""):n}},{key:"getStripHost",value:function(t){var n=c.default.host(t);return e.stripProtocol(n)}},{key:"getLinkValue",value:function(e,t){return(0,o.get)(e,t,"-1")}},{key:"getLinkUrl",value:function(t,n){var r=e.getLinkValue(t,n);return e.stripLocale(r)}},{key:"urlIsParentOfOrigin",value:function(e,t){return!(!e||!t||"-1"===e)&&(e===t||-1!==t.indexOf("".concat(e).concat("/"===e.slice(-1)?"":"/")))}},{key:"findTree",value:function(t,n){var r=e.stripLocale(n).replace(/localhost:[0-9]+/,"www.ferrari.com"),a=e.getApplication(n).replace(/localhost:[0-9]+/,"www.ferrari.com"),u="";return t.some((function(t,n){var a=(0,o.get)(t,"menuItems",[]);return a.some((function(t,a){var o=e.getLinkUrl(t,"content.link.url");return r===o&&(u="".concat(n,"-").concat(a),!0)})),""!==u||a.forEach((function(t,a){var c=e.getLinkUrl(t,"content.link.url");"list-of-links"===t.template?(0,o.get)(t,"content.menuItems",[]).forEach((function(t,c){var i=e.getLinkUrl(t,"link.url");e.urlIsParentOfOrigin(i,r)&&(u="".concat(n,"-").concat(a,"-").concat(c)),(0,o.get)(t,"menuItems.length",0)>0&&t.menuItems.forEach((function(t,o){var i=e.getLinkUrl(t,"link.url");e.urlIsParentOfOrigin(i,r)&&(u="".concat(n,"-").concat(a,"-").concat(c,"-").concat(o))}))})):""===u&&e.urlIsParentOfOrigin(c,r)&&(u="".concat(n,"-").concat(a))}))})),""===u&&t.some((function(t,n){return(0,o.get)(t,"menuItems",[]).some((function(t,r){var c=e.getLinkUrl(t,"content.link.url"),i=e.getApplication(c);return"list-of-links"===t.template?(0,o.get)(t,"content.menuItems",[]).forEach((function(t,r){var o=e.getLinkUrl(t,"link.url"),c=e.getApplication(o);return!!e.urlIsParentOfOrigin(c,a)&&(u="".concat(n),!0)})):!!e.urlIsParentOfOrigin(i,a)&&(u="".concat(n),!0)}))})),""===u&&t.some((function(t,r){var o=e.stripLocale(n),c=e.getLinkUrl(t,"link.url"),i=e.getApplication(c);return!(!e.urlIsParentOfOrigin(c,o)&&!e.urlIsParentOfOrigin(i,a))&&(u="".concat(r),!0)})),""===u&&t.some((function(t,r){var a=e.getStripHost(n);return e.getStripHost(e.getLinkValue(t,"link.url"))===a&&(u="".concat(r),!0)})),u}}]),e}();t.default=p},NZQk:function(e,t,n){"use strict";var r=n("KI45"),a=n("hfKm"),u=n("2Eek"),o=n("XoMD"),c=n("Jo+v"),i=n("4mXO"),l=n("pLtp");a(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function n(){return(0,p.default)(this,n),(0,v.default)(this,(0,h.default)(n).apply(this,arguments))}return(0,m.default)(n,t),(0,g.default)(n,[{key:"render",value:function(){var t=this.metadata.map((function(e,t){var n=e;return-1!==String((0,k.get)(e,"property","")).indexOf(":image")&&-1===String((0,k.get)(e,"property","")).indexOf(":image:")&&-1===String((0,k.get)(e,"content","")).indexOf("/")&&e.content&&(n=S({},n,{content:b.default.ferrariImageUrl(e.content,{width:1080})})),w("meta",(0,d.default)({key:t},n))})),n=w("title",null,this.title);return w(e,(0,d.default)({},this.props,{metadata:t,title:n}))}},{key:"metadata",get:function(){var e=(0,k.get)(this.props.pageData,"metadata",[]);if(e.some((function(e){return"og:image"===e.property}))){var t=[];e.some((function(e){return"og:image:width"===e.property}))||t.push({property:"og:image:width",content:"1200"}),e.some((function(e){return"og:image:height"===e.property}))||t.push({property:"og:image:height",content:"630"}),t.length>0&&(e=[].concat((0,f.default)(e),t))}return e}},{key:"title",get:function(){return(0,k.get)(this.props.pageData,"title","Ferrari")}}],[{key:"getInitialProps",value:function(t){var n;return s.default.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n={},!e.getInitialProps){r.next=5;break}return r.next=4,s.default.awrap(e.getInitialProps(t));case 4:n=r.sent;case 5:return r.abrupt("return",S({},n));case 6:case"end":return r.stop()}}))}}]),n}(O.default.Component);return(0,y.default)(t,"defaultProps",{pageData:{}}),t};var s=r(n("ln6h")),f=r(n("TbGu")),d=r(n("htGi")),p=r(n("/HRN")),g=r(n("WaGi")),v=r(n("ZDA2")),h=r(n("/+P4")),m=r(n("N9n2")),y=r(n("xHqa")),O=r(n("q1tI")),k=n("T89o"),b=r(n("DOE8")),w=O.default.createElement;function I(e,t){var n=l(e);if(i){var r=i(e);t&&(r=r.filter((function(t){return c(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,y.default)(e,t,n[t])})):o?u(e,o(n)):I(Object(n)).forEach((function(t){a(e,t,c(n,t))}))}return e}},Nnea:function(e,t,n){"use strict";var r=n("KI45"),a=n("G4HQ"),u=n("hfKm"),o=n("2Eek"),c=n("XoMD"),i=n("Jo+v"),l=n("4mXO"),s=n("pLtp");u(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function n(){return(0,p.default)(this,n),(0,v.default)(this,(0,h.default)(n).apply(this,arguments))}return(0,m.default)(n,t),(0,g.default)(n,[{key:"componentDidUpdate",value:function(e,t){var n=(0,k.get)(this.props,"share.scrolled",null),r=(0,k.get)(e,"share.scrolled",null);n&&r!==n&&this.sharedFocusOn&&this.props.dispatch((0,b.addPopup)({params:this.sharedFocusOn,template:this.sharedFocusOn.type}))}},{key:"render",value:function(){return P(y.default.Fragment,null,P(e,this.props),P(I.PopupManager,null))}},{key:"sharedFocusOn",get:function(){var e=this.props,t=e.pageData,n=e.router,r=e.activeFocusOnCustom,a=(0,w.focusOnPayloadProxy)(r,n.query,n.asPath);return a||(0,w.getActiveFocusOn)(t.content.blocks,n.query.focusOn)}}],[{key:"getInitialProps",value:function(t){var n;return f.default.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n={},!e.getInitialProps){r.next=5;break}return r.next=4,f.default.awrap(e.getInitialProps(t));case 4:n=r.sent;case 5:return r.abrupt("return",L({},n));case 6:case"end":return r.stop()}}))}}]),n}(y.Component);return(0,O.connect)((function(e){return{share:e.share}}),null)(t)};var f=r(n("ln6h")),d=r(n("xHqa")),p=r(n("/HRN")),g=r(n("WaGi")),v=r(n("ZDA2")),h=r(n("/+P4")),m=r(n("N9n2")),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},a=u&&i;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=a?i(e,o):null;c&&(c.get||c.set)?u(r,o,c):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),O=n("/MKj"),k=n("T89o"),b=n("DzDn"),w=n("Tzds"),I=n("jTJQ");function S(e){if("function"!==typeof a)return null;var t=new a,n=new a;return(S=function(e){return e?n:t})(e)}var P=y.default.createElement;function x(e,t){var n=s(e);if(l){var r=l(e);t&&(r=r.filter((function(t){return i(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):c?o(e,c(n)):x(Object(n)).forEach((function(t){u(e,t,i(n,t))}))}return e}},Tzds:function(e,t,n){"use strict";var r=n("KI45"),a=n("hfKm"),u=n("2Eek"),o=n("XoMD"),c=n("Jo+v"),i=n("4mXO"),l=n("pLtp");a(t,"__esModule",{value:!0}),t.default=t.getShareFocusOnMeta=t.focusOnPayloadProxy=t.changeCountrySlug=t.getActiveFocusOn=t.replaceMeta=void 0;var s=r(n("8+Nu")),f=r(n("v7Px")),d=r(n("eVuF")),p=r(n("ln6h")),g=r(n("xHqa")),v=n("T89o"),h=r(n("DOE8")),m=n("19JU"),y=n("QmWs");function O(e,t){var n=l(e);if(i){var r=i(e);t&&(r=r.filter((function(t){return c(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,g.default)(e,t,n[t])})):o?u(e,o(n)):O(Object(n)).forEach((function(t){a(e,t,c(n,t))}))}return e}var b=function(e,t,n){var r=new RegExp(":?(".concat(t,")$"));return(e||[]).map((function(e){return e.name&&r.test(e.name)||e.property&&r.test(e.property)?k({},e,{content:n}):e}))};t.replaceMeta=b;var w=function(e,t){return e.find((function(e){return e.slug===t}))},I=function(e,t){return e.map((function(e){return(0,v.get)(e,"focusOn",{})})).find((function(e){return(0,v.get)(e,"slug",!1)===t}))};t.getActiveFocusOn=I;t.changeCountrySlug=function(){var e=m.window.location.pathname||"";return"/"!==e&&(e=(e=e.replace(/\/?([a-z]{2}-[A-Z]{2})?(.*)/,"$2")).replace("/fda","")),e};var S=function(e,t,n){var r,a,u,o,c,i,l,s,f,d,g,m,y;return p.default.async((function(O){for(;;)switch(O.prev=O.next){case 0:return r=e.folderId,a=t.locale,u=t.focusOn,o=t.focusOnSection,O.next=4,p.default.awrap(h.default.thronToken());case 4:return O.next=6,p.default.awrap(h.default.thronContentCategory(r));case 6:if(c=O.sent,i=String(a.split("-")[0]).toUpperCase(),!(l=c.filter((function(e){var t=h.default.thronFindLocaleName(e.locales,i);return(0,v.kebabCase)(t)===u}))[0])){O.next=23;break}if(f=h.default.thronFindLocaleName(l.locales,i),d=h.default.thronUrlImg(l.id,"1200x600",l.id,"thumbnail",{scalemode:"auto"}),s={},"PLAYLIST"!==l.contentType){O.next=21;break}return O.next=16,p.default.awrap(h.default.thronContentPlaylist(l.id));case 16:g=O.sent,s.items=g.map((function(e){var t=e.deliveryInfoMinimal;return{landscapeBig:{id:t.dynThumbService},portraitMedium:{id:t.dynThumbService}}})),s.items[o]&&(m=s.items[o].landscapeBig.id,d=h.default.ferrariImageResource(m,{width:1200,height:600})),O.next=22;break;case 21:"VIDEO"===l.contentType&&(s.videoId=l.id);case 22:s=k({blockType:n,id:l.id,type:l.contentType,metadatas:l.metadatas,locales:l.locales,src:d,subSection:(0,v.kebabCase)(f),name:f},s);case 23:return y={},s&&(s.blockType=n,y={share:{title:s.name,image:s.src}}),O.abrupt("return",{focusOn:s,metadata:y});case 26:case"end":return O.stop()}}))},P=function(e,t){var n,r,a;return p.default.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=t.focusOn,r=(0,v.get)(e,"items",[]).map((function(e){return(0,v.get)(e,"focusOn",{})})).filter((function(e){return e.slug===n}))[0],a={},r&&(r.blockType="StoriesSlider",a={share:r.share}),u.abrupt("return",{focusOn:r,metadata:a});case 5:case"end":return u.stop()}}))},x=function(e,t){var n,r,a;return p.default.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=t.focusOn,r=(0,v.get)(e,"items",[]).map((function(e){return(0,v.get)(e,"focusOn",{})})).filter((function(e){return e.slug===n}))[0],a={},r&&(r.blockType="StoriesGeoSlider",a={share:r.share}),u.abrupt("return",{focusOn:r,metadata:a});case 5:case"end":return u.stop()}}))},L=function(e,t){var n,r;return p.default.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={},(r=(0,v.get)(t,"focusOn",!1)&&{videoId:(0,v.get)(e,"cover.intero.full",(0,v.get)(e,"cover.coverType.video.intero.full")),slug:(0,v.get)(e,"slug","")})&&(r.blockType="CoverPlayer",n={share:r.share}),a.abrupt("return",{focusOn:r,metadata:n});case 4:case"end":return a.stop()}}))},M=function(e,t,n){var r,a,u;return p.default.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,p.default.awrap(h.default.thronContentDetails(t.focusOn));case 2:if(r=o.sent,a={},u=[],r){o.next=7;break}return o.abrupt("return",{focusOn:a,metadata:u});case 7:return a={blockType:n,videoId:r.id,moduleSlug:t.slug},u={share:k({},e.share)},o.abrupt("return",{focusOn:a,metadata:u});case 10:case"end":return o.stop()}}))},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";switch(n){case"MediaGallery":case"MediaGalleryAdvanced":return S(e,t,n);case"StoriesGeoSlider":return x(e,t);case"StoriesSlider":return P(e,t);case"CoverPlayer":return L(e,t);case"FeaturedItems":return M(e,t,n);default:return(0,d.default)((function(e){return e(null)}))}};t.focusOnPayloadProxy=function(e,t,n){if(!(0,v.isPlainObject)(e))return null;switch(e.blockType){case"MediaGallery":case"MediaGalleryAdvanced":switch(e.type){case"PLAYLIST":var r=Number(t.focusOnSection),a=n;return n.match(/\/\d+$/)&&(a=n.replace(/\/\d+$/,"")),{type:"image-carousel",items:(0,v.get)(e,"items").map((function(e){return{images:e}})),focusOnShare:a,startIndex:(0,f.default)(r)?0:r};case"VIDEO":return{type:"full-video",autoplay:!1,thronMediaId:(0,v.get)(e,"videoId"),focusOnShare:n};default:return{}}case"StoriesGeoSlider":case"StoriesSlider":return e;case"CoverPlayer":return{type:"full-video",autoplay:!1,thronMediaId:(0,v.get)(e,"videoId"),focusOnShare:n,moduleSlug:(0,v.get)(e,"slug")};case"FeaturedItems":var u=e.videoId,o=e.moduleSlug;return u&&o&&n?{type:"full-video",autoplay:!0,thronMediaId:u,focusOnShare:n,moduleSlug:o}:null;default:return null}};t.getShareFocusOnMeta=function(e,t,n){var r,a,u,o,c,i,l,f,d;return p.default.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(!(r=w(e.content.blocks,t.slug))){g.next=18;break}if(-1===["MediaGallery","MediaGalleryAdvanced","StoriesSlider","StoriesGeoSlider","CoverPlayer","FeaturedItems"].indexOf(r.type)){g.next=12;break}return g.next=5,p.default.awrap(T(r,t,r.type));case 5:o=g.sent,c=o.focusOn,i=o.metadata,a=c,u=i,g.next=13;break;case 12:a=I(e.content.blocks,t.focusOn);case 13:return(0,v.get)(u,"share",!1)?l=u:(0,v.get)(r,"share",!1)&&(l=r),f=e.metadata,l&&(d=l.share,(0,v.toPairs)(d).forEach((function(e){var t=(0,s.default)(e,2),n=t[0],r=t[1];f=b(f,n,r)}))),f=b(f,"url",new y.URL(n,"https://www.ferrari.com/fda")),g.abrupt("return",{focusOn:a,metadata:f});case 18:return g.abrupt("return",null);case 19:case"end":return g.stop()}}))};t.default={}}}]);