(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+OHl":function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("htGi")),c=i(n("/HRN")),u=i(n("WaGi")),d=i(n("K47E")),h=i(n("N9n2")),f=i(n("ZDA2")),p=i(n("/+P4")),v=i(n("xHqa")),y=i(n("JzC+")),x=i(n("5gSw")),g=o.default.createElement;function m(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,f.default)(this,n)}}var w=function(e){(0,h.default)(n,e);var t=m(n);function n(){var e;(0,c.default)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,v.default)((0,d.default)(e),"state",{timelineExpanded:!1}),e}return(0,u.default)(n,[{key:"onEnterClick",value:function(){this.setState({timelineExpanded:!0})}},{key:"render",value:function(){return g("span",null,g(y.default,(0,l.default)({collapse:this.state.timelineExpanded,onEnterClick:this.onEnterClick.bind(this)},this.props.introText)),g(x.default,(0,l.default)({locale:this.props.locale,momentsLabel:this.props.momentsLabel,type:"home",decades:this.props.decades,moments:this.props.moments,display:this.state.timelineExpanded,onEventSelect:this.props.onEventSelect},this.props.intro)))}}]),n}(o.Component);t.default=w},"/8bm":function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("xHqa")),c=i(n("/HRN")),u=i(n("WaGi")),d=i(n("N9n2")),h=i(n("ZDA2")),f=i(n("/+P4")),p=i(n("DOE8")),v=i(n("TSYQ")),y=i(n("feOW")),x=i(n("95S5")),g=o.default.createElement;function m(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,h.default)(this,n)}}var w=function(e){(0,d.default)(n,e);var t=m(n);function n(){return(0,c.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.carousel=new y.default(this.el,{speed:1500,effect:"fade",fadeEffect:{crossFade:!0}})}},{key:"componentDidUpdate",value:function(e){if(this.props.slides!==e.slides){this.el.style.opacity=1;var t=this.props.slides.map((function(e){var t=p.default.ferrariImageUrl(e.src);return'<div class="swiper-slide"><img src="'.concat(t,'" alt="').concat(e.title,'"/></div>')}));this.carousel.removeAllSlides(),this.carousel.appendSlide(t)}this.props.currentSlide!==e.currentSlide&&this.carousel.slideTo(this.props.currentSlide)}},{key:"getSlidesContent",value:function(){var e=this.props.currentSlide;return this.props.slides.map((function(t,n){var i,a=t.title,s=t.text;return g("div",{className:(0,v.default)((i={},(0,l.default)(i,x.default.slidesText,!0),(0,l.default)(i,x.default.slidesTextActive,n===e||-1===e&&0===n),i)),key:n},g("h2",null,a),s&&g("p",null,s))}))}},{key:"render",value:function(){var e=this;return g("div",{className:x.default.carousel},g("div",{className:x.default.slidesContent},this.getSlidesContent()),g("div",{className:"swiper-container",ref:function(t){return e.el=t}},g("div",{className:"swiper-wrapper"})))}}]),n}(o.Component);t.default=w},"3QAe":function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("htGi")),c=i(n("TbGu")),u=i(n("/HRN")),d=i(n("WaGi")),h=i(n("K47E")),f=i(n("N9n2")),p=i(n("ZDA2")),v=i(n("/+P4")),y=i(n("xHqa")),x=i(n("OWyD")),g=i(n("/8bm")),m=i(n("BU83")),w=o.default.createElement;function D(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,p.default)(this,n)}}var M=n("McxZ"),C=function(e){(0,f.default)(n,e);var t=D(n);function n(){var e;(0,u.default)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,y.default)((0,h.default)(e),"state",{currentCover:null,currentCluster:null,currentClusterIndex:null,timelineExpanded:!1,enterComplete:!1,slides:[]}),(0,y.default)((0,h.default)(e),"onEventHover",(function(t){e.setState({currentCover:t>=0?t:e.state.currentClusterIndex})})),(0,y.default)((0,h.default)(e),"onClusterSelect",(function(t,n){e.setState({currentCluster:(0,c.default)(t),currentClusterIndex:n,currentCover:n})})),(0,y.default)((0,h.default)(e),"onEnterClick",(function(){e.state.enterComplete&&e.setState({timelineExpanded:!0})})),(0,y.default)((0,h.default)(e),"onEnterComplete",(function(){e.setState({enterComplete:!0})})),e}return(0,d.default)(n,[{key:"componentDidUpdate",value:function(e,t){if(t.currentCluster!==this.state.currentCluster){var n=[];this.state.currentCluster.forEach((function(e){"decade"!==e.type&&n.push({src:e.content.background.landscapeBig,title:e.content.title,text:e.content.subtitle})}));var i=this.findMomentDecade(this.state.currentCluster[0].content.year);n.unshift({src:i.background.landscapeBig,title:i.title}),this.setState({slides:n})}}},{key:"getCurrentSlideIndex",value:function(){return this.state.currentCluster?this.state.currentCover-this.state.currentClusterIndex:null}},{key:"findMomentDecade",value:function(e){return _.find(this.props.decades,(function(t){return t.startYear<=e&&t.endYear>=e}))}},{key:"render",value:function(){var e=this;return w("span",null,w(g.default,{currentSlide:this.getCurrentSlideIndex(),slides:this.state.slides}),w(m.default,{moments:this.props.moments,decades:this.props.decades,onEventSelect:this.props.onEventSelect,onEventHover:this.onEventHover,onClusterSelect:this.onClusterSelect,timelineExpanded:this.state.timelineExpanded}),w(x.default,(0,l.default)({display:this.state.timelineExpanded,showTip:this.state.currentCluster,onEnterClick:this.onEnterClick,onEnterScroll:this.onEnterClick,onEnterComplete:this.onEnterComplete},this.props.introText)),w("noscript",null,w("ul",null,this.props.moments.map((function(t){return w("li",{key:t.slug},w("a",{href:"/".concat(e.props.locale,"/history/").concat(M.translate("moments",e.props.language),"/").concat(t.content.year,"/").concat(t.slug)},t.content.title))})))))}}]),n}(o.Component);t.default=C},"4A8t":function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("eVuF")),c=i(n("ln6h")),u=i(n("/HRN")),d=i(n("WaGi")),h=i(n("N9n2")),f=i(n("ZDA2")),p=i(n("/+P4")),v=i(n("DOE8")),y=n("z/o8"),x=(i(n("eCb9")),i(n("auWL"))),g=o.default.createElement;function m(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,f.default)(this,n)}}var w=function(e){(0,h.default)(n,e);var t=m(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this;return c.default.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(v.default.thronLoad());case 2:this.player=v.default.thronEmbed(this.video.getAttribute("id"),{xcontentId:this.props.videoIdLandscape,noSkin:!0,muted:!0,loop:!0,mouseWheelZoom:!1,pauseOtherPlayers:!1,ignoreUserBehavior:!0}),y.TweenLite.to(this.video,1,{delay:1,opacity:1}),this.player.on("ready",(function(){window.objectFitPolyfill(e.player.container().querySelector("video")),e.player.play()}));case 5:case"end":return t.stop()}}),null,this,null,l.default)}},{key:"render",value:function(){var e=this;return g("div",{className:x.default.video},g("span",{id:"video-".concat(v.default.uuid()),ref:function(t){return e.video=t}}))}}]),n}(o.Component);t.default=w},BU83:function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("/HRN")),c=i(n("WaGi")),u=i(n("K47E")),d=i(n("N9n2")),h=i(n("ZDA2")),f=i(n("/+P4")),p=i(n("xHqa")),v=i(n("jnLD")),y=i(n("FQOK")),x=i(n("d3bx")),g=o.default.createElement;function m(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,h.default)(this,n)}}var w=function(e){(0,d.default)(n,e);var t=m(n);function n(){var e;(0,l.default)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,u.default)(e),"onSlideClick",(function(t){e.stage.onSlotClick(t)})),e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout((function(){e.stage=new v.default({container:e.container,applicationName:"/history",moments:e.props.moments,decades:e.props.decades,onEventSelect:e.props.onEventSelect,onEventHover:e.props.onEventHover,onClusterSelect:e.props.onClusterSelect}),e.stage.init(),e.stage.play()}),1500)}},{key:"componentDidUpdate",value:function(e){e.timelineExpanded!==this.props.timelineExpanded&&this.stage.expandTimeline()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this;return g("span",null,g("div",{className:x.default.gl,ref:function(t){return e.container=t}}),this.stage&&g(y.default,{show:this.props.timelineExpanded,onSlideClick:this.onSlideClick,activeSlide:this.stage.getActiveDecadeIndex(),decades:this.stage.getDecades()}))}}]),n}(o.Component);t.default=w},FQOK:function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("xHqa")),c=i(n("/HRN")),u=i(n("WaGi")),d=i(n("N9n2")),h=i(n("ZDA2")),f=i(n("/+P4")),p=i(n("feOW")),v=i(n("TSYQ")),y=i(n("Lq0n")),x=o.default.createElement;function g(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,h.default)(this,n)}}var m=function(e){(0,d.default)(n,e);var t=g(n);function n(){return(0,c.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.carousel=new p.default(this.el,{slidesPerView:"auto",centerInsufficientSlides:!0,freeMode:!0})}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e,t=this,n=(0,v.default)((e={},(0,l.default)(e,y.default.wrapper,1),(0,l.default)(e,y.default.show,this.props.show),e));return x("div",{className:n},x("div",{className:"swiper-container",ref:function(e){return t.el=e}},x("div",{className:"swiper-wrapper"},this.props.decades.map((function(e,n){return x("div",{key:n,className:"swiper-slide",onClick:function(){return t.props.onSlideClick(n)}},x("span",{className:(0,v.default)((0,l.default)({},y.default.active,t.props.activeSlide===n))},"".concat(e.startyear," - ").concat(e.endyear)))})))))}}]),n}(o.Component);t.default=m},"JzC+":function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("/HRN")),c=i(n("WaGi")),u=i(n("K47E")),d=i(n("N9n2")),h=i(n("ZDA2")),f=i(n("/+P4")),p=i(n("xHqa")),v=n("RHZy"),y=i(n("bhZE")),x=i(n("rMxs")),g=o.default.createElement;function m(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,h.default)(this,n)}}var w=function(e){return g("svg",e,g("path",{d:"M7.268 9.547L0 16l4-8-4-8 7.268 6.453C7.715 6.82 8 7.377 8 8c0 .623-.285 1.18-.732 1.547z"}))};w.defaultProps={width:"8",height:"16",viewBox:"0 0 8 16",xmlns:"http://www.w3.org/2000/svg"};var _=function(e){(0,d.default)(n,e);var t=m(n);function n(){var e;(0,l.default)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,u.default)(e),"state",{display:!1}),e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=new v.TimelineLite,t=new y.default(this.title,{type:"words,chars",charsClass:"char"}).chars;this.title.style.opacity=1,e.to(this.text1,.6,{opacity:1,y:"-50%"}),e.to(this.text1,.6,{opacity:0,y:"-70%"},"+=3"),e.staggerTo(t,.3,{opacity:1,y:0,x:0,rotation:0},.05,"+=.5"),e.to(this.text2,.6,{opacity:1,y:0}),e.to(this.cta,.6,{opacity:1,y:0})}},{key:"componentDidUpdate",value:function(e){e.collapse!==this.props.collapse&&!0===this.props.collapse&&(v.TweenMax.to([this.text2,this.cta],.1,{opacity:0}),v.TweenMax.to(this.title,.3,{scale:.8,y:"20vh"}),v.TweenMax.to(this.wrapper,.3,{height:"40vh"}),v.TweenMax.to(this.extWrapper,.3,{backgroundColor:"#000"}))}},{key:"render",value:function(){var e=this;return g("div",{className:x.default.intro,ref:function(t){return e.extWrapper=t}},g("p",{className:x.default.introTextStart,ref:function(t){return e.text1=t}},this.props.text1),g("div",{className:x.default.introWrapper,ref:function(t){return e.wrapper=t}},g("h2",{className:x.default.introTitle,ref:function(t){return e.title=t}},this.props.title),g("p",{className:x.default.introText,dangerouslySetInnerHTML:{__html:this.props.text2},ref:function(t){return e.text2=t}}),g("span",{className:x.default.introCta,onClick:this.props.onEnterClick,ref:function(t){return e.cta=t}},this.props.cta," ",g("i",null,g(w,null)))))}}]),n}(o.Component);t.default=_},OWyD:function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("/HRN")),c=i(n("WaGi")),u=i(n("K47E")),d=i(n("N9n2")),h=i(n("ZDA2")),f=i(n("/+P4")),p=i(n("xHqa")),v=n("RHZy"),y=i(n("bhZE")),x=n("JRPe"),g=i(n("G082")),m=o.default.createElement;function w(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,h.default)(this,n)}}var _=function(e){return m("svg",e,m("path",{d:"M7.268 9.547L0 16l4-8-4-8 7.268 6.453C7.715 6.82 8 7.377 8 8c0 .623-.285 1.18-.732 1.547z"}))};_.defaultProps={width:"8",height:"16",viewBox:"0 0 8 16",xmlns:"http://www.w3.org/2000/svg"};var D=function(e){(0,d.default)(n,e);var t=w(n);function n(){var e;(0,l.default)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,u.default)(e),"state",{}),(0,p.default)((0,u.default)(e),"onWheel",(function(t){t.deltaY>0&&e.props.onEnterScroll()})),e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=new v.TimelineLite({delay:2}),n=new y.default(this.title,{type:"words,chars",charsClass:"char"}),i=new y.default(this.tip,{type:"words,chars",charsClass:"char"}),a=n.chars;this.tipChars=i.chars,this.title.style.opacity=1,this.tip.style.opacity=1,t.to(this.text1,.6,{opacity:1,y:"-50%"}),t.to(this.text1,.6,{opacity:0,y:"-70%"},"+=5"),t.staggerTo(a,.3,{opacity:1,y:0,x:0,rotation:0},.05,"+=.5"),t.to(this.text2,.6,{opacity:1,y:0}),t.to(this.cta,.6,{opacity:1,y:0,onComplete:function(){e.props.onEnterComplete()}}),window.addEventListener("resize",(function(n){e.props.display||(t.kill(),t.restart())})),window.addEventListener("wheel",this.onWheel)}},{key:"componentDidUpdate",value:function(e){e.display!==this.props.display&&!0===this.props.display&&(this.wrapper.style.pointerEvents="none",v.TweenMax.to([this.text1,this.text2,this.title,this.cta],.5,{opacity:0}),v.TweenMax.staggerTo(this.tipChars,1,{delay:2.5,opacity:1,y:0,x:0,rotation:0},.02)),e.showTip!==this.props.showTip&&v.TweenMax.staggerTo(this.tipChars,.7,{opacity:0,y:20,x:0,rotation:"45deg"},.02)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("wheel",this.onWheel)}},{key:"render",value:function(){var e=this;return m("div",{className:g.default.intro,ref:function(t){return e.wrapper=t}},m("p",{className:g.default.introTip,ref:function(t){return e.tip=t}},m(x.FormattedMessage,{id:this.props.tip})),m("p",{className:g.default.introTextStart,ref:function(t){return e.text1=t}},this.props.text1),m("div",null,m("h2",{className:g.default.introTitle,ref:function(t){return e.title=t}},this.props.title),m("p",{className:g.default.introText,ref:function(t){return e.text2=t}},this.props.text2)),m("span",{className:g.default.introCta,onClick:this.props.onEnterClick,ref:function(t){return e.cta=t}},m(x.FormattedMessage,{id:this.props.cta})," ",m("i",null,m(_,null))))}}]),n}(o.Component);t.default=D},"PfP/":function(e,t,n){"use strict";var i=n("KI45");n("hfKm")(t,"__esModule",{value:!0}),t.getXYMouseHoverActive=t.getXYMouseHover=void 0;var a=i(n("6BQ9")),s=i(n("LvDl"));t.getXYMouseHover=function(e,t,n,i,r){var o=t,l=n,c=0,u=.8*window.innerWidth;if(o.length>0){var d=l[o[o.length-1]].x+50,h=l[o[0]].x-50,f=s.default.findIndex(r,(function(t){return t>e})),p=f-1,v=r[f],y=r[p];if(-1!==o.indexOf(e))c=(d-h)/(o.length-1)*o.indexOf(e)+h;else if(e<o[0])if(-1!==r.indexOf(e))c=(h-l[0].x)/r.indexOf(o[0])*r.indexOf(e)-u/2;else{var x=(h-l[0].x)/r.indexOf(o[0])*f-u/2,g=(h-l[0].x)/r.indexOf(o[0])*p-u/2;c=g+Math.abs(x-g)/(v-y)*(e-y)}else if(-1!==r.indexOf(e)){c=(l[i.length-1].x-d)/(r.length-1-r.indexOf(o[o.length-1]))*(r.indexOf(e)-r.indexOf(o[o.length-1]))+d}else{var m=(l[i.length-1].x-d)/(r.length-1-r.indexOf(o[o.length-1])),w=m*(f-r.indexOf(o[o.length-1]))+d,_=m*(p-r.indexOf(o[o.length-1]))+d;c=_+Math.abs(w-_)/(v-y)*(e-y)}}else c=l[e].x;return{x:(0,a.default)(c),y:0}};t.getXYMouseHoverActive=function(e,t,n,i,s){var r=t,o=n,l=0;if(r.length>0&&-1===s.indexOf(e)){var c=o[r[r.length-1]].x+20,u=o[r[0]].x-20;r[r.length-1]===s[0]&&(c=o[r[r.length-1]].x),r[0]===s[s.length-1]&&(u=o[r[0]].x),l=-1!==r.indexOf(e)?(c-u)/(r.length-1)*r.indexOf(e)+u:r[0]<s[0]?e<r[0]?(u-o[0].x)/r[0]*-(r[0]-e)+u:e>r[0]&&e<s[0]?(o[s[0]].x-c)/(s[0]-r[r.length-1])*(e-r[r.length-1])+c:o[e].x:e<r[0]&&e>s[s.length-1]?o[s[s.length-1]].x+(u-o[s[s.length-1]].x)/(r[0]-s[s.length-1])*(e-s[s.length-1]):e>r[0]&&e>s[s.length-1]?(o[o.length-1].x-c)/(o.length-1-r[r.length-1])*(e-r[r.length-1])+c:o[e].x,r[r.length-1]===s[s.length-1]&&r[0]===s[0]&&(l=o[e].x)}else l=o[e].x;return{x:(0,a.default)(l),y:0}}},RNiq:function(e,t,n){"use strict";var i=n("KI45"),a=n("5Uuq"),s=n("hfKm"),r=n("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),l=i(n("ln6h")),c=i(n("eVuF")),u=i(n("/HRN")),d=i(n("WaGi")),h=i(n("K47E")),f=i(n("N9n2")),p=i(n("ZDA2")),v=i(n("/+P4")),y=i(n("xHqa")),x=n("eHHv"),g=n("ANjH"),m=n("nOHt"),w=n("LvDl"),_=i(n("SbWC")),D=i(n("8Kt/")),M=n("8cHP"),C=i(n("kQFM")),E=i(n("qyhG")),S=i(n("9qRu")),b=n("gGHL"),T=n("mJQZ"),k=i(n("Nnea")),P=i(n("WZaA")),L=n("oTHJ"),H=i(n("NZQk")),Y=i(n("JOu4")),X=i(n("/tWa")),O=n("8ANe"),I=i(n("SZxG")),N=i(n("4A8t")),W=i(n("XYn9")),A=i(n("+OHl")),K=i(n("3QAe")),R=i(n("uMKW")),q=o.default.createElement;function U(e){var t=function(){if("undefined"===typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;n=r(i,arguments,a)}else n=i.apply(this,arguments);return(0,p.default)(this,n)}}var F=n("McxZ"),G=function(e){(0,f.default)(n,e);var t=U(n);function n(){var e;(0,u.default)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,y.default)((0,h.default)(e),"state",{loading:!1,currentMoment:null,activeOrigin:null}),(0,y.default)((0,h.default)(e),"onTransitionLayerEntered",(function(){M.Router.pushRoute("history-page",{locale:e.props.locale,section:F.translate("moments",e.props.language),year:e.state.currentMoment.year.toString(),slug:e.state.currentMoment.slug})})),(0,y.default)((0,h.default)(e),"onEventSelect",(function(t){e.setState({currentMoment:t,loading:!0})})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.setActiveOrigin()}},{key:"isMobile",get:function(){return(0,L.breakpointIsLessThan)("landscape",this.props.breakpoint.size)}},{key:"setActiveOrigin",value:function(){this.setState({activeOrigin:X.default.findTree(this.props.menuPillars,window.location.href)})}},{key:"getMomentBySlug",value:function(e){return(0,w.find)(this.props.moments,{slug:e})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.metadata,i=this.state.activeOrigin;return q("div",{className:R.default.wrapper},q(D.default,null,t,n),q(O.Menu,{logoSeoTag:"h1",activeOrigin:i}),q("div",{className:R.default.share},q(Y.default,{fixed:!0,template:"white",bgtransparent:!0,position:"header"})),q(N.default,{videoIdLandscape:this.props.videoCover.landscape,videoIdPortrait:this.props.videoCover.portrait}),!this.isMobile&&q(K.default,{locale:this.props.locale,language:this.props.language,moments:this.props.moments,decades:this.props.decades,onEventSelect:this.onEventSelect,introText:this.props.introText}),this.isMobile&&q(A.default,{locale:this.props.locale,momentsLabel:F.translate("moments",this.props.language),introText:this.props.introText,moments:this.props.moments,onEventSelect:this.onEventSelect,decades:this.props.decades}),this.state.loading&&q(W.default,{moment:this.getMomentBySlug(this.state.currentMoment.slug),animate:!0,onComplete:this.onTransitionLayerEntered}),q(O.StickyFooter,{footerProps:{hideNewsletter:!0,origin:"HISTORY"}}))}}]),n}(o.Component);(0,y.default)(G,"getInitialProps",(function(e){var t,n,i,a,s,r,o,u,d,h;return l.default.async((function(f){for(;;)switch(f.prev=f.next){case 0:return e.req,t=e.query,n=e.isServer,i=e.store,a=t.locale,s=a.split("-")[0],o={},u=(r=["timeline","events","categories","models"]).map((function(e){return E.default[e](t.locale).then((function(e){return e.data.results})).catch((function(e){return(0,S.default)(e)}))})),f.next=8,l.default.awrap(c.default.all(u));case 8:return d=f.sent,r.forEach((function(e,t){return o[e]=d[t]})),h=[],n&&(h.push(E.default.superheader(a).then((function(e){return e.data.results})).then((function(e){var t=e.content;i.dispatch((0,b.setPillars)(t))})).catch((function(e){return(0,S.default)(e)}))),h.push(E.default.superfooter(a).then((function(e){return e.data.results})).then((function(e){var t=e.content;i.dispatch((0,T.setFooterData)(t))})).catch((function(e){return(0,S.default)(e)})))),f.next=14,l.default.awrap(c.default.all(h));case 14:return f.sent,o.title=o.timeline.title,o.metadata=o.timeline.metadata,f.abrupt("return",{locale:a,pageData:o,language:s,decades:o.timeline.content.decades,moments:o.events,videoCover:o.timeline.content.cover.videos,introText:{title:o.timeline.content.intro.title,tip:"select_a_decade",text1:o.timeline.content.intro.loaderDescription,text2:o.timeline.content.intro.description,cta:"enter"}});case 18:case"end":return f.stop()}}),null,null,null,c.default)}));var Z=(0,x.compose)(m.withRouter,(0,_.default)(C.default,(function(e){return{breakpoint:e.breakpoint,menuPillars:e.menu.pillars}}),(function(e){return(0,g.bindActionCreators)({},e)})),P.default,H.default,k.default,I.default)(G);t.default=Z},jnLD:function(e,t,n){"use strict";var i=n("KI45");n("hfKm")(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("TbGu")),s=i(n("6BQ9")),r=i(n("/HRN")),o=i(n("WaGi")),l=i(n("LvDl")),c=n("z/o8"),u=n("PfP/"),d=null;d=n("ZT0g");var h=function(){function e(t){(0,r.default)(this,e),this.options=t,this.dataIndexes=[],this.currentStep=-1,this.dragging=!1,this.ui={circle:{radius:.35*this.options.container.offsetHeight,endAngle:-Math.PI/2,startAngle:-Math.PI/2},points:{count:250}},this.app=null,this.tl_points=null,this.preloadTimeline=null,this.preloaderDots=null,this.preloaderCircle=null,this.decades=[],this.decadesYears=[],this.XY_step_0=[],this.XY_step_scale=[],this.XY_step_1=[],this.XY_step_active=[],this.XY_step_scale3=[],this.draggingOffset=[],this.oldx=0,this.oldCurrentHoverIndex=-1,this.currentHoverPoints=[],this.activePoint=-1,this.lines=[],this.linesPositions=[],this.fullLabels=[],this.singleLabels=[],this.decadesLabels=[],this.isDown=!1,this.lastX=0,this.lastY=0,this.dragHash=0,this.animating=!1,this.lineTexture=d.Texture.from("".concat(t.applicationName,"/static/assets/img/line.png"))}return(0,o.default)(e,[{key:"hideDecadesLabels",value:function(){c.TweenMax.staggerTo(this.decadesLabels,.3,{opacity:0},.01)}},{key:"showDecadesLabels",value:function(){c.TweenMax.staggerTo(this.decadesLabels,.3,{opacity:1},.01)}},{key:"setLabelXY",value:function(e){var t=(0,s.default)(this.XY_step_0[e].x-14+window.innerWidth/2),n=(0,s.default)(this.XY_step_0[e].y-14+this.container.offsetHeight/2);c.TweenMax.set(this.fullLabels[e],{x:t,y:n}),c.TweenMax.set(this.singleLabels[e],{x:t+11,y:n+11}),t>window.innerWidth/2&&(this.fullLabels[e].classList.add("-right"),this.singleLabels[e].classList.add("-right")),n<this.container.offsetHeight/2&&(this.fullLabels[e].classList.add("-top"),this.singleLabels[e].classList.add("-top"))}},{key:"setLabelsXY",value:function(){var e=this;this.data.forEach((function(t,n){return e.setLabelXY(n)}))}},{key:"updateSingleLabelXY",value:function(e){var t=(0,s.default)(this.XY_step_1[e].x+window.innerWidth/2),n=(0,s.default)(this.XY_step_1[e].y+this.container.offsetHeight/2),i=this.singleLabels[e];i.classList.remove("-top","-right"),i.classList.add("-center"),c.TweenMax.set(this.singleLabels[e],{x:t,y:n,opacity:0}),-1!==this.decades.indexOf(e)&&c.TweenMax.to(i,2,{opacity:1,delay:.05*this.decades.indexOf(e)})}},{key:"updateSingleLabelsXY",value:function(e){var t=this;this.data.forEach((function(e,n){return t.updateSingleLabelXY(n)}))}},{key:"createLabels",value:function(){var e=this;this.data.forEach((function(t,n){var i=t.year,a=t.title,s=(t.slug,document.createElement("div")),r=document.createElement("div");s.classList.add("label"),r.classList.add("decade"),s.innerHTML="<div><strong>".concat(i,"</strong><span>").concat(a||"","</span></div>"),r.innerHTML='\n        <span>\n          <span>\n            <svg width="8" height="16"><path d="M7.2676791 9.5469594L0 16l4-8-4-8 7.2676791 6.4530406C7.7147545 6.81984337 8 7.37663507 8 8s-.2852455 1.18015663-.7323209 1.5469594z"/></svg>\n          </span>\n        </span>\n        <div>'.concat(i,"</div>"),e.container.appendChild(s),e.container.appendChild(r),e.fullLabels.push(s),e.singleLabels.push(r),-1!==e.decades.indexOf(n)&&e.decadesLabels.push(r),e.setLabelXY(n),r.addEventListener("click",(function(t){t.preventDefault(),2!==e.currentStep||-1===e.activeDecade.indexOf(n)||e.animating||e.options.onEventSelect(e.data[n])}))}))}},{key:"removeFullLabels",value:function(){var e=this;this.fullLabels.forEach((function(t){return e.container.removeChild(t)}))}},{key:"setPreloaderDotsPosition",value:function(){this.preloaderDots.clear();for(var e=0;e<this.ui.points.count;e++){var t=e/(this.ui.points.count/2)*Math.PI,n=this.ui.circle.radius*Math.cos(t),i=this.ui.circle.radius*Math.sin(t);this.preloaderDots.beginFill(16777215,.5),this.preloaderDots.drawCircle(n,i,1),this.preloaderDots.endFill()}this.preloaderDots.x=this.app.screen.width/2,this.preloaderDots.y=this.app.screen.height/2,this.preloaderDots.alpha=0}},{key:"createPreloaderDots",value:function(){this.preloaderDots=new d.Graphics,this.setPreloaderDotsPosition(),this.app.stage.addChild(this.preloaderDots)}},{key:"createPreloaderCircle",value:function(){this.preloaderCircle=new d.Graphics,this.app.stage.addChild(this.preloaderCircle)}},{key:"getDecadesXYStepScale",value:function(e){var t={x:0,y:0};return-1!==this.decades.indexOf(e)?t.x=3*window.innerWidth/(this.decades.length-1)*this.decades.indexOf(e)-3*window.innerWidth/2:t.x=0,t}},{key:"getPointsXYStepScale",value:function(e){var t=this.XY_step_scale[e],n=this.XY_step_scale;if(-1===this.decades.indexOf(e)){var i=l.default.findIndex(this.decades,(function(t){return t>e})),a=i-1,s=this.decades[i],r=this.decades[a];t.x=n[this.decades[i]].x+(n[this.decades[i]].x-n[this.decades[a]].x)/(s-r)*(e-s)}return t}},{key:"getDecadesXYStep1",value:function(e){var t=.8*window.innerWidth,n={x:0,y:0};return-1!==this.decades.indexOf(e)?n.x=(0,s.default)(t/(this.decades.length-1)*this.decades.indexOf(e)-t/2):n.x=0,n}},{key:"getPointsXYStep1",value:function(e){var t=this.XY_step_1[e],n=this.XY_step_1;if(-1===this.decades.indexOf(e)){var i=l.default.findIndex(this.decades,(function(t){return t>e})),a=i-1,r=this.decades[i],o=this.decades[a],c=n[this.decades[i]].x+(n[this.decades[i]].x-n[this.decades[a]].x)/(r-o)*(e-r);t.x=(0,s.default)(c)}return t}},{key:"createTimelineXY",value:function(){var e=this;this.XY_step_scale=[],this.XY_step_1=[],this.data.forEach((function(t,n){t.year;e.XY_step_scale.push({x:e.getDecadesXYStepScale(n).x,y:0}),e.XY_step_1.push({x:e.getDecadesXYStep1(n).x,y:0})})),this.data.forEach((function(t,n){t.year;e.XY_step_scale[n]={x:e.getPointsXYStepScale(n).x,y:0},e.XY_step_1[n]={x:e.getPointsXYStep1(n).x,y:0}}))}},{key:"drawTimeline",value:function(e){var t=this;this.tl_points.clear(),this.data.forEach((function(n,i){n.year;var a=1,s=e||0,r=9408399,o=i/(t.data.length/2)*Math.PI*.9+Math.PI/2,l=Math.round(t.ui.circle.radius*Math.cos(o)),c=Math.round(t.ui.circle.radius*Math.sin(o));-1!==t.decades.indexOf(i)&&(r=16777215,a=3),t.XY_step_0.push({x:l,y:c}),t.tl_points.beginFill(r,s),t.tl_points.drawCircle(l,c,a),t.tl_points.endFill()})),this.tl_points.x=this.app.screen.width/2,this.tl_points.y=this.app.screen.height/2}},{key:"createTimelineCircle",value:function(){this.tl_points=new d.Graphics,this.createTimelineXY(),this.drawTimeline(),this.app.stage.addChild(this.tl_points)}},{key:"play",value:function(){var e=this,t=[];this.data.forEach((function(e,n){e.year;t.push({a:0})})),this.preloadTimeline=new c.TimelineMax({delay:1.5,onUpdate:function(){e.preloaderCircle.clear(),e.preloaderCircle.lineStyle(4,14297372,1),e.preloaderCircle.arc(.5*window.innerWidth-1,.5*e.container.offsetHeight,e.ui.circle.radius,e.ui.circle.startAngle,e.ui.circle.endAngle,!1)},onStart:function(){e.animating=!0},onComplete:function(){e.animating=!1,e.currentStep=0}}),this.preloadTimeline.to(this.preloaderDots,.8,{alpha:1,x:this.app.screen.width/2,y:this.app.screen.height/2}).to(this.ui.circle,3,{endAngle:3*Math.PI/2,ease:c.Power1.easeOut}).to(this.ui.circle,3,{startAngle:3*Math.PI/2,ease:c.Power1.easeOut}).to(this.preloaderDots,1,{alpha:0},"-=2.9"),this.data.forEach((function(n,i){n.year;e.preloadTimeline.to(t[i],.2,{a:1,onUpdate:function(){e.tl_points.clear(),e.data.forEach((function(n,i){n.year;var a=1,s=13947602,r=i/(e.data.length/2)*Math.PI*.9+Math.PI/2,o=Math.round(e.ui.circle.radius*Math.cos(r)),l=Math.round(e.ui.circle.radius*Math.sin(r));-1!==e.decades.indexOf(i)&&(s=16777215,a=3),e.tl_points.beginFill(s,t[i].a),e.tl_points.drawCircle(o,l,a),e.tl_points.endFill()}))}},"-=".concat(Math.max(2-i/30,.17)))})),this.preloadTimeline.staggerTo(this.decadesLabels,1.5,{opacity:1},.3,"-=2.5")}},{key:"d",value:function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)}},{key:"setCursor",value:function(e){document.body.style.cursor=e}},{key:"onMouseHoverStep0",value:function(e){var t=this;if(!this.animating)if(this.d(e,{x:0,y:0})<this.ui.circle.radius+60&&this.d(e,{x:0,y:0})>this.ui.circle.radius-60){var n=[];this.XY_step_0.forEach((function(t,i){var a=Math.hypot(t.x-(0,s.default)(e.x),t.y-(0,s.default)(e.y));n.push((0,s.default)(a))}));var i=Math.min.apply(Math,n);this.activeHoverPointIndex=i<50?n.indexOf(i):-1,-1!==this.activeHoverPointIndex?this.setCursor("pointer"):this.setCursor("default"),this.fullLabels.forEach((function(e,n){n===t.activeHoverPointIndex?e.classList.add("-active"):e.classList.remove("-active")})),this.hideDecadesLabels()}else this.activeHoverPointIndex=-1,this.showDecadesLabels(),this.setCursor("default"),l.default.each(document.querySelectorAll(".label"),(function(e,t){e.classList.remove("-active")}))}},{key:"onMouseHoverStep1",value:function(e){var t=this,n=l.default.findIndex(this.decades,(function(n,i){return t.XY_current[n].x>(0,s.default)(e.x)}));this.activeHoverDecadeIndex=this.decades[n],e.y<-50||e.y>50?(this.setCursor("default"),this.activeHoverDecadeIndex=-1):this.setCursor("pointer"),void 0!==this.decades[n-1]?this.currentHoverPoints=this.dataIndexes.slice(this.decades[n-1],this.activeHoverDecadeIndex+1):this.currentHoverPoints=[],this.currentHoverPoints[0]!==this.oldCurrentHoverIndex&&(this.oldCurrentHoverIndex=this.currentHoverPoints[0],this.data.forEach((function(e,n){e.year;var i=(0,u.getXYMouseHover)(n,t.currentHoverPoints,t.XY_step_1,t.data,t.decades);c.TweenMax.to(t.XY_current[n],.5,{x:i.x,y:i.y,onUpdate:function(){0===n&&t.drawPoints("hover")}});var a=(0,s.default)(i.x+window.innerWidth/2),r=(0,s.default)(i.y+t.container.offsetHeight/2);t.singleLabels[n].classList.remove("-top","-right"),t.singleLabels[n].classList.add("-center"),c.TweenMax.to(t.singleLabels[n],.5,{x:a,y:r,opacity:-1!==t.decades.indexOf(n)|0})})))}},{key:"onMouseHoverStep2",value:function(e){var t=this;if(this.isDown){if(this.dragHash=Math.abs(e.x-this.startX),this.dragHash<15)return;if(e.x<this.lastX){if(e.x-this.draggingOffset[this.draggingOffset.length-1].x<0)return}else if(e.x>this.lastX&&e.x-this.draggingOffset[0].x>0)return;this.lastX=e.x,this.data.forEach((function(n,i){n.year;var a=e.x-t.draggingOffset[i].x;c.TweenMax.killTweensOf(t.XY_current[i]),c.TweenMax.to(t.XY_current[i],2,{x:a,y:0,ease:c.Elastic.easeOut.config(1,1),onStart:function(){t.animating=!0,t.activePoint=-1},onUpdate:function(){i===t.data.length-1&&t.drawPoints("active"),-1!==t.activeDecade.indexOf(i)&&t.activeDecade.indexOf(i)!==t.activeDecade.length-1&&(t.lines[t.activeDecade.indexOf(i)].x=t.XY_current[i].x+window.innerWidth/2+10,t.lines[t.activeDecade.indexOf(i)].x0=t.XY_current[i].x+window.innerWidth/2+10);var e=t.XY_current[i].x+window.innerWidth/2,n=0+t.container.offsetHeight/2;c.TweenMax.set(t.singleLabels[i],{x:e,y:n,opacity:-1!==t.decades.indexOf(i)||-1!==t.activeDecade.indexOf(i)|0})},onComplete:function(){t.animating=!1,t.XY_step_active[i].x=t.XY_current[i].x,t.XY_step_active[i].y=t.XY_current[i].y,0===i&&(t.oldCurrentHoverIndex=-1)}})}))}else{if(this.animating)return;var n,i=l.default.findIndex(this.decades,(function(n,i){return t.XY_current[n].x>(0,s.default)(e.x)})),a=[];if(this.XY_current.forEach((function(n,i){var r=Math.hypot(n.x-(0,s.default)(e.x),n.y-(0,s.default)(e.y));-1===t.decades.indexOf(i)?a.push((0,s.default)(r)):a.push(9999)})),n=Math.min.apply(Math,a),this.activePoint=n<50?a.indexOf(Math.min.apply(Math,a)):-1,this.activeHoverDecadeIndex=this.decades[i],e.y<-50||e.y>50||-1===this.activePoint?(this.setCursor("default"),this.activeHoverDecadeIndex=-1,this.activePoint=-1):this.setCursor("pointer"),void 0!==this.decades[i-1]?this.currentHoverPoints=this.dataIndexes.slice(this.decades[i-1],this.activeHoverDecadeIndex+1):this.currentHoverPoints=[],this.currentHoverPoints[0]===this.oldCurrentHoverIndex&&this.activePoint===this.oldActivePoint)return;this.oldCurrentHoverIndex=this.currentHoverPoints[0],this.data.forEach((function(e,n){e.year;var i=(0,u.getXYMouseHoverActive)(n,t.currentHoverPoints,t.XY_step_active,t.decades,t.activeDecade);c.TweenMax.to(t.XY_current[n],.5,{x:i.x,y:i.y,onUpdate:function(){t.drawPoints("active")}});var a=(0,s.default)(i.x+window.innerWidth/2),r=(0,s.default)(i.y+t.container.offsetHeight/2);c.TweenMax.to(t.singleLabels[n],.5,{x:a,y:r,opacity:-1!==t.decades.indexOf(n)||-1!==t.activeDecade.indexOf(n)|0})}))}}},{key:"onSlotClick",value:function(e){var t=this;if(void 0!==e&&(this.currentHoverPoints=this.dataIndexes.slice(this.decades[e],this.decades[e+1]+1)),0!==this.currentHoverPoints.length&&!this.animating&&(!this.activeDecade||this.currentHoverPoints[0]!==this.activeDecade[0])){void 0===e&&(this.animating=!0),this.lines.forEach((function(e){t.app.stage.removeChild(e)})),this.lines=[],this.activeDecade=(0,a.default)(this.currentHoverPoints),this.currentStep=2,this.options.onClusterSelect&&this.options.onClusterSelect(l.default.filter(this.data,(function(e,n){return-1!==t.activeDecade.indexOf(n)})),this.activeDecade[0]);var n=window.innerWidth/3,i=Math.max(window.innerWidth/1.2,1800);this.data.forEach((function(e,a){e.year;var r={x:0,y:0};if(-1!==t.activeDecade.indexOf(a)){var o=i*t.data.length/t.decades.length,l=o/(t.data.length-1)*t.activeDecade[0];if(r.x=o/(t.data.length-1)*a-l-n,t.activeDecade.indexOf(a)!==t.activeDecade.length-1){var u=new d.Sprite(t.lineTexture);u.width=o/(t.data.length-1)-20,u.x=r.x+window.innerWidth/2+10,u.y=t.container.offsetHeight/2,u.alpha=0,u.w0=u.width,u.x0=u.x,a%2===0&&(u.scale.y=-1),t.lines.push(u),t.app.stage.addChild(u)}}else if(a<t.activeDecade[0])r.x=20*(a-t.activeDecade[0])-n;else{var h=t.activeDecade[t.activeDecade.length-1],f=i*t.data.length/t.decades.length,p=f/(t.data.length-1)*t.activeDecade[0];r.x=f/(t.data.length-1)*h-p+20*(a-h)-n}t.XY_step_active[a]=r,c.TweenMax.to(t.XY_current[a],2,{x:(0,s.default)(r.x),y:(0,s.default)(r.y),ease:c.Elastic.easeOut.config(.8,1),onUpdate:0===a&&t.drawPoints.bind(t,"active"),onComplete:function(){a===t.data.length-1&&(t.animating=!1)}}),t.lines.forEach((function(e,t){c.TweenMax.to(e,2,{alpha:1,delay:.1*t+.5})}));var v=r.x+window.innerWidth/2,y=r.y+t.container.offsetHeight/2;c.TweenMax.to(t.singleLabels[a],.5,{x:v,y:y,opacity:-1!==t.decades.indexOf(a)||-1!==t.activeDecade.indexOf(a)|0})}))}}},{key:"onMouseMove",value:function(e){var t=this,n={x:e.clientX-window.innerWidth/2,y:e.clientY-this.container.offsetHeight/2};if(0===this.currentStep)this.onMouseHoverStep0(n);else if(1===this.currentStep)this.onMouseHoverStep1(n);else if(2===this.currentStep){this.onMouseHoverStep2(n);var i=this.activeDecade.indexOf(this.activePoint);-1!==i?this.animating||(this.activePoint!==this.oldActivePoint&&this.singleLabels.forEach((function(e,n){n===t.activePoint?(e.classList.add("-hover"),t.options.onEventHover(n)):e.classList.remove("-hover")})),this.lines.forEach((function(e,n){n===i?(c.TweenMax.to(e,.5,{x:e.x0+20,width:e.w0-20}),t.lines[n-1]&&c.TweenMax.to(t.lines[n-1],.5,{x:t.lines[n-1].x0,width:t.lines[n-1].w0-20})):c.TweenMax.to(e,.5,{x:e.x0,width:e.w0})}))):(this.animating||this.lines.forEach((function(e,t){c.TweenMax.to(e,.5,{x:e.x0,width:e.w0})})),this.singleLabels.forEach((function(e){return e.classList.remove("-hover")})),this.options.onEventHover(-1)),this.oldActivePoint=this.activePoint}}},{key:"onClick",value:function(e){0===this.currentStep&&this.activeHoverPointIndex&&-1!==this.activeHoverPointIndex&&this.options.onEventSelect(this.data[this.activeHoverPointIndex])}},{key:"onMouseDown",value:function(e){var t=this;2===this.currentStep&&(document.body.style.cursor="grabbing",this.data.forEach((function(n,i){n.year;t.draggingOffset[i]={x:e.clientX-window.innerWidth/2-t.XY_current[i].x,y:0}})),this.lastX=0,this.startX=e.clientX-window.innerWidth/2,this.isDown=!0)}},{key:"onMouseUp",value:function(e){var t=this;document.body.style.cursor="default",this.dragHash<15?this.onSlotClick():2===this.currentStep&&this.data.forEach((function(e,n){e.year;t.draggingOffset[n]={x:0,y:0}})),this.dragHash=0,this.isDown=!1,this.startX=0}},{key:"onWindowResize",value:function(e){var t=this;this.app.renderer&&this.app.renderer.resize(window.innerWidth,this.container.offsetHeight),this.ui.circle.radius=.35*this.container.offsetHeight,-1===this.currentStep?(this.preloadTimeline&&this.preloadTimeline.kill(),this.setPreloaderDotsPosition(),this.createTimelineXY(),this.drawTimeline(),this.setLabelsXY(),this.preloadTimeline&&this.preloadTimeline.restart()):0===this.currentStep?(this.XY_step_0=[],this.createTimelineXY(),this.drawTimeline(1),this.setLabelsXY()):1===this.currentStep?(this.tl_points.x=this.app.screen.width/2,this.tl_points.y=this.app.screen.height/2,this.createTimelineXY(),this.updateSingleLabelsXY(),this.drawPoints(null,this.XY_step_1)):2===this.currentStep&&(this.tl_points.x=this.app.screen.width/2,this.tl_points.y=this.app.screen.height/2,this.updateSingleLabelsXY(),this.lines.forEach((function(e){return e.position.y=t.container.offsetHeight/2})),this.drawPoints("active"))}},{key:"expandTimeline",value:function(){var e=this;this.animating=!0,this.hideDecadesLabels(),this.removeFullLabels(),this.singleLabels.forEach((function(e){return e.style.opacity=0})),setTimeout((function(){e.tweensCircleToLine.forEach((function(e){return e.play()}))}),300)}},{key:"attachEvents",value:function(){this.container.removeEventListener("mousemove",this.onMouseMove.bind(this)),this.container.addEventListener("mousemove",this.onMouseMove.bind(this)),this.container.removeEventListener("click",this.onClick.bind(this)),this.container.addEventListener("click",this.onClick.bind(this)),this.container.removeEventListener("mousedown",this.onMouseDown.bind(this)),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),this.container.removeEventListener("mouseup",this.onMouseUp.bind(this)),this.container.addEventListener("mouseup",this.onMouseUp.bind(this)),window.removeEventListener("resize",this.onWindowResize.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this))}},{key:"drawPoints",value:function(e,t){var n=this,i=t||this.XY_current;this.tl_points.clear(),this.data.forEach((function(t,a){t.year;var s=1,r=.5,o=13947602,l=i[a].x,c=i[a].y;-1!==n.decades.indexOf(a)&&(o=16777215,r=1,s=3),"hover"===e&&-1!==n.currentHoverPoints.indexOf(a)&&(r=1,o=16777215,n.tl_points.beginFill(o,r)),"active"===e?(n.activeDecade.indexOf(a)>0&&n.activeDecade.indexOf(a)<n.activeDecade.length-1?(r=+(n.activePoint!==a),s=3,o=16777215,n.tl_points.lineStyle(1,16777215,r),n.tl_points.beginFill(16777215,0)):(n.tl_points.lineStyle(null),n.tl_points.beginFill(16777215,r)),-1!==n.currentHoverPoints.indexOf(a)&&-1===n.activeDecade.indexOf(a)&&(r=1,o=16777215,n.tl_points.beginFill(o,r))):n.tl_points.beginFill(o,r),n.tl_points.drawCircle(l,c,s),n.tl_points.endFill()}))}},{key:"animateStep1",value:function(){var e=this;this.XY_current=(0,a.default)(this.XY_step_0),this.tweensCircleToLine=[],this.data.forEach((function(t,n){t.year;var i=c.TweenMax.to(e.XY_current[n],2,{x:e.XY_step_scale[n].x,y:e.XY_step_scale[n].y,paused:!0,ease:c.Elastic.easeOut.config(.8,1),onStart:function(){e.animating=!0},onUpdate:0===n&&e.drawPoints.bind(e)});e.tweensCircleToLine.push(i)})),this.data.forEach((function(t,n){t.year;var i=c.TweenMax.to(e.XY_current[n],2,{x:e.XY_step_1[n].x,y:e.XY_step_1[n].y,paused:!0,ease:c.Elastic.easeOut.config(.5,1),delay:.6,onUpdate:0===n&&e.drawPoints.bind(e),onComplete:function(){e.updateSingleLabelXY(n),e.currentStep=1,e.animating=!1}});e.tweensCircleToLine.push(i)}))}},{key:"findMomentDecade",value:function(e){return l.default.find(this.options.decades,(function(t){return t.startYear<=e&&t.endYear>=e}))}},{key:"processData",value:function(){var e=this;this.data=[],this.options.decades.sort((function(e,t){return e.startYear-t.startYear})),this.options.moments.forEach((function(t){var n=t.content.year,i=e.findMomentDecade(n);i&&(-1===e.decadesYears.indexOf(i.startYear)&&(e.decadesYears.push(i.startYear),e.data.push({year:i.startYear,startyear:i.startYear,endyear:i.endYear,type:"decade",slug:t.slug,content:t.content}),e.decades.push(e.data.length-1)),e.data.push({year:n,type:"moment",slug:t.slug,title:t.content.title,content:t.content}))}));var t=this.findMomentDecade(this.data[this.data.length-1].year);this.data.push({year:this.data[this.data.length-1].year,startyear:t.startYear,endyear:t.endYear,type:"moment",slug:this.data[this.data.length-1].slug,content:this.data[this.data.length-1].content}),this.decades.push(this.data.length-1),this.dataIndexes=this.data.map((function(e,t){return t}))}},{key:"getDecades",value:function(){return l.default.filter(this.data,{type:"decade"})}},{key:"getActiveDecadeIndex",value:function(){return this.activeDecade?this.decades.indexOf(this.activeDecade[0]):-1}},{key:"init",value:function(){this.app&&this.app.destroy(!0),this.container=this.options.container,this.processData(),this.app=new d.Application({antialias:!0,transparent:!0}),this.app.renderer.autoResize=!0,this.app.renderer.plugins.interaction.autoPreventDefault=!1,this.app.renderer.view.style.touchAction="auto",this.options.container.appendChild(this.app.view),this.createPreloaderDots(),this.createTimelineCircle(),this.createLabels(),this.createPreloaderCircle(),this.attachEvents(),this.animateStep1(),this.onWindowResize()}}]),e}();t.default=h},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["vlRD",1,2,6,3,7,5,9,0,18,19,8]]]);