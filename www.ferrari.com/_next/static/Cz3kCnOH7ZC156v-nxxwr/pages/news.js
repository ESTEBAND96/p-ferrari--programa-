(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{YLMp:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news",function(){return a("xiWU")}])},xiWU:function(e,t,a){"use strict";var n=a("KI45"),r=a("Jo+v"),s=a("hfKm"),u=a("G4HQ"),l=a("pbKT");s(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("htGi")),o=n(a("TbGu")),c=n(a("9Jkg")),f=n(a("ln6h")),d=n(a("eVuF")),p=n(a("v7Px")),h=n(a("6BQ9")),g=n(a("/HRN")),w=n(a("K47E")),v=n(a("WaGi")),m=n(a("ZDA2")),P=n(a("/+P4")),y=n(a("N9n2")),N=n(a("xHqa")),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=X(t);if(a&&a.has(e))return a.get(e);var n={},u=s&&r;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?r(e,l):null;i&&(i.get||i.set)?s(n,l,i):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a("q1tI")),k=n(a("SbWC")),x=n(a("kQFM")),_=n(a("8Kt/")),C=a("nOHt"),L=a("eHHv"),S=a("T89o"),M=n(a("Nnea")),T=n(a("WZaA")),I=n(a("NZQk")),E=n(a("hzb8")),H=n(a("SHU5")),U=a("8ANe"),q=n(a("qyhG")),D=a("gGHL"),V=a("3Eu1"),W=a("mJQZ"),F=a("LXYO"),G=a("+Fh1"),R=a("CX7h"),B=n(a("CFqB")),J=a("sd54"),K=a("X6sk"),O=n(a("9qRu")),Q=n(a("VHFN"));function X(e){if("function"!==typeof u)return null;var t=new u,a=new u;return(X=function(e){return e?a:t})(e)}var Y=b.default.createElement;function j(e){var t=function(){if("undefined"===typeof Reflect||!l)return!1;if(l.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,P.default)(e);if(t){var r=(0,P.default)(this).constructor;a=l(n,arguments,r)}else a=n.apply(this,arguments);return(0,m.default)(this,a)}}var Z=function(e){(0,y.default)(a,e);var t=j(a);function a(e){var n;(0,g.default)(this,a),n=t.call(this,e),(0,N.default)((0,w.default)(n),"lastLoadedPage",0);var r=n.props.isServer;if(n.state={splash:r,featured:e.featured,news:e.news,fetchedNews:[],newsCategories:e.newsCategories,loadingInfinite:!0},404===(0,S.get)(e,"error.error.errorStatus",!1)){throw new Error((0,c.default)({message:"News page not found",status:404}))}return n}return(0,v.default)(a,null,[{key:"getInitialProps",value:function(e){var t,a,n,r,s,u,l,i,o,c,g,w;return f.default.async((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.store,a=e.query,n=e.isServer,e.res,r=[],s=(0,h.default)(a.pageNumber,10),r.push(q.default.page(a.locale,"news","news").then((function(e){return e.data.results})).catch((function(e){return(0,O.default)(e)}))),r.push(q.default.newsListing({locale:a.locale,channel:null,exclude_channels:"corporate",limit:B.default.newsPerPage,skip:(0,p.default)(s)?null:(s-1)*B.default.newsPerPage,categories:(0,K.getCategoryParams)(a),year:(0,K.getYearParams)(a),tags:(0,K.getTagParams)(a)}).then((function(e){return e.data.results}))),n&&(r.push(q.default.newsCategories({locale:a.locale}).then((function(e){return e.data.results}))),r.push(q.default.superheader(a.locale).then((function(e){return e.data.results})).then((function(e){var a=e.content;t.dispatch((0,D.setPillars)(a))})).catch((function(e){var a=(0,S.get)(e,"response.data",{});return t.dispatch((0,V.setError)(a)),{}}))),r.push(q.default.superfooter(a.locale).then((function(e){return e.data.results})).then((function(e){var a=e.content;t.dispatch((0,W.setFooterData)(a))})).catch((function(e){var a=(0,S.get)(e,"response.data",{});return t.dispatch((0,V.setError)(a)),{}})))),v.next=8,f.default.awrap(d.default.all(r));case 8:return u=v.sent,l=u[0],i=t.getState().locale.locale||"en",o=u[1].params.tags,c={},g="",w="",o.length>0&&(g="en"!==i&&""!==o[0].localization[i]?o[0].localization[i]:o[0].description,w=o[0].slug,c={name:g,slug:w}),t.dispatch((0,F.setChannelVariables)((0,S.get)(l,"variables",[]))),t.dispatch((0,G.setPageVariables)((0,S.get)(l,"content.pageVariables",[]))),v.abrupt("return",{serverPage:s||1,listingPageNum:s||1,isServer:n,pageData:l,featured:(0,S.get)(u[1],"featuredItems",[]),news:(0,S.get)(u[1],"items",[]),newsCategories:u[2],activeTag:c,total:(0,S.get)(u[1],"total",0)});case 19:case"end":return v.stop()}}),null,null,null,d.default)}}]),(0,v.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.lastLoadedPage=this.props.listingPageNum,setTimeout((function(){e.hideSplash()}),1e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.router.query,a=e.router.query;t.pageNumber!==a.pageNumber&&(this.lastLoadedPage=(0,h.default)(a.pageNumber,10)),(0,c.default)(this.state.news)!==(0,c.default)(e.news)&&this.setState({news:e.news,fetchedNews:[]}),(0,c.default)(this.state.featured)!==(0,c.default)(e.featured)&&this.setState({featured:e.featured})}},{key:"getMicrodata",value:function(){var e=this,t={"@context":"https://schema.org","@type":"ItemList",itemListElement:[].concat((0,o.default)(this.props.featured),(0,o.default)(this.props.news)).map((function(t,a){var n="".concat(e.baseUrl,"/articles/").concat(t.slug);return{"@type":"ListItem",position:a+1,url:(0,S.get)(t,"content.isExternal",!1)?(0,S.get)(t,"content.externalLink",""):n}}))};return Y((function(e){var t=e.data;return Y("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:(0,c.default)(t)}})}),{data:t})}},{key:"fetchMoreNews",value:function(e){var t,a,n,r;return f.default.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.pageNumber,s.next=3,f.default.awrap(q.default.newsListing({locale:e.locale,channel:null,exclude_channels:"corporate",limit:B.default.newsPerPage,skip:(t-1)*B.default.newsPerPage,categories:(0,K.getCategoryParams)(e),year:(0,K.getYearParams)(e),tags:(0,K.getTagParams)(e)}));case 3:a=s.sent,n=a.data,r=[].concat((0,o.default)(this.state.fetchedNews),(0,o.default)((0,S.get)(n.results,"items",[]))),this.setState({fetchedNews:r,loadingInfinite:r.length!==this.state.fetchedNews.length});case 7:case"end":return s.stop()}}),null,this,null,d.default)}},{key:"hideSplash",value:function(){this.setState({splash:!1})}},{key:"navigateToNews",value:function(e,t,a,n){return e.preventDefault(),a&&n?(window.open(n,"_blank"),!1):(window.location.href="".concat(this.baseUrl,"/articles/").concat(t),!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.pageData,n=t.metadata,r=t.activeTag,s=t.total,u=[];this.props.listingPageNum>1&&u.push({rel:"prev",href:"".concat(this.baseUrl,"/news/").concat(this.props.listingPageNum-1)}),this.props.news.length&&u.push({rel:"next",href:"".concat(this.baseUrl,"/news/").concat(this.props.listingPageNum+1)});return Y("div",null,Y(_.default,null,Y("title",null,(0,S.get)(a,"title","News")),n,u.map((function(e,t){return Y("link",(0,i.default)({},e,{key:t}))}))),Y(E.default,{visible:this.splashVisible}),Y(H.default,null),this.getMicrodata(),Y(U.Menu,{staticColor:!0}),Y("div",{className:Q.default.newsWrapper},Y(J.NewsPage,{channel:null,router:this.props.router,listingPageNum:this.props.listingPageNum,pageData:this.props.pageData,fetchMoreNews:function(t){return e.fetchMoreNews(t)},newsCategories:this.state.newsCategories,featured:this.state.featured,news:[].concat((0,o.default)(this.state.news),(0,o.default)(this.state.fetchedNews)),listingReveal:!this.state.splash,loadingInfinite:this.state.loadingInfinite,activeTag:r,total:s,footer:{referrer:"news"}})))}},{key:"splashVisible",get:function(){return this.state.splash}},{key:"baseUrl",get:function(){var e=this.props.router;return(0,R.retrieveBaseUrl)()+e.asPath.split("/").slice(0,2).join("/")}}]),a}(b.Component),z=(0,L.compose)((0,k.default)(x.default,(function(e){return{breakpoint:e.breakpoint,error:e.error}})),C.withRouter,T.default,I.default,M.default)(Z);t.default=z}},[["YLMp",1,2,6,3,7,5,0,4,8,9,11]]]);